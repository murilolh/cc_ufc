<html><head><title>Compilando programas que utilizam OpenGL</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta content="MSHTML 6.00.2722.900" name="GENERATOR"><link title="Introdução à computação gráfica com OpenGL" href="http://www.ceset.unicamp.br/%7Emagic/opengl/index2006.html" rel="HOME"><link title="Conceitos iniciais" href="http://www.ceset.unicamp.br/%7Emagic/opengl/conceitos-iniciais.html" rel="UP"><link title="Estrutura de um programa" href="http://www.ceset.unicamp.br/%7Emagic/opengl/estrutura-programa.html" rel="PREVIOUS"><link title="Compilando programas - usando o Dev" href="http://www.ceset.unicamp.br/%7Emagic/opengl/compilando-programas-dev.html" rel="NEXT"></head><body text="#000000" bgcolor="#ffffff">
<div class="NAVHEADER">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tbody>
  <tr>
    <th colspan="3" align="middle">Introdução à computação gráfica com 
OpenGL</th></tr>
  <tr>
    <td valign="bottom" width="10%" align="left"><a href="http://www.ceset.unicamp.br/%7Emagic/opengl/estrutura-programa.html">Prev</a></td>
    <td valign="bottom" width="80%" align="middle">Capítulo 1. Conceitos 
    iniciais</td>
    <td valign="bottom" width="10%" align="right"><a href="http://www.ceset.unicamp.br/%7Emagic/opengl/compilando-programas-dev.html">Next</a></td></tr></tbody></table>
<hr width="100%" align="left">
</div>
<div class="SECT1">
<h1 class="SECT1"><a name="COMPILANDO-PROGRAMAS">1.3. Compilando programas que 
utilizam OpenGL - Linux</a></h1>
<p>Todos os programas deste curso foram criados e testados no Linux (<a href="http://www.linux.org/" target="_top">http://www.linux.org</a>), e 
utilizam GLUT como biblioteca auxiliar para manipular janelas e tratar eventos. 
Esta escolha pode ser justificada por duas razões principais:</p>
<p></p>
<ol type="1">
  <li>
  <p>O Linux (clone do Unix) é um ótimo sistema operacional (o melhor, segundo a opinião 
  do meu amigo Prof. Agostinho). Um programa escrito em C padrão, 
  compilado e testado no Linux, também funcionará a contento em outros sistemas, 
  principalmente se for compilado com a mesma ferramenta utilizada para compilar 
  os exemplos deste curso, o <tt class="FILENAME">gcc</tt>, da GNU (<a href="http://www.gnu.org/" target="_top">http://www.gnu.org</a>). Além 
  de ser gratuito, este compilador é bastante otimizado e possui versões 
  disponíveis para a maioria dos sistemas operacionais existentes.</p>
  </li><li>
  <p>O GLUT está implementado em diversos sistemas operacionais, facilitando a 
  portabilidade de programas.</p></li></ol>
<p>As tarefas de compilação foram automatizadas com o utilitário <b class="COMMAND">make</b>. O <b class="COMMAND">make</b> determina automaticamente 
que partes de um grande programa necessitam ser recompiladas e os comandos 
necessários para recompilá-las, a partir da leitura das regras definidas em um 
arquivo <tt class="FILENAME">Makefile</tt>. Assim, para efetuar a compilação do 
programa, basta executar o comando <b class="COMMAND">make</b>, ao invés de 
digitar vários comandos no prompt do Unix.</p>
<p>O <tt class="FILENAME">Makefile</tt> da <a href="http://www.ceset.unicamp.br/%7Emagic/opengl/compilando-programas.html#FIG-MAKEFILE">Figura 
1-2</a> foi utilizado para compilar os exemplos desse curso. Para obter uma 
cópia deste arquivo para uso no CESET clique <a href="http://www.ceset.unicamp.br/%7Emagic/opengl/Makefile_ceset" target="_top">aqui</a>. Já para obter uma 
cópia do <tt class="FILENAME">Makefile</tt> para uso no Unisal, clique <a href="http://www.ceset.unicamp.br/%7Emagic/opengl/Makefile_unisal" target="_top">aqui</a>. Grave-os em seu diretório de trabalho simplesmente com o nome <tt class="FILENAME">Makefile</tt>.</p>
<div class="FIGURE">
<p><b><a name="FIG-MAKEFILE">Figura 1-2. arquivo Makefile</a></b></p>
<table width="100%" bgcolor="#e0e0e0" border="0">
  <tbody>
  <tr>
    <td><pre class="PROGRAMLISTING"># Compila programas do curso de OpenGL no ambiente Linux
# Substitua nome_do_programa pelo nome do programa ...
# ...que se está trabalhando
#
# Antes das linhas que contém "gcc...", não pode haver espaço em
# branco e sim uma marca de tabulação
#
# Prof. Marco Antonio
#

# Variables
MESA = /usr/bin/Mesa-5.0 
INCPATH = -I$(MESA)/include
LIBPATH = -L$(MESA)/lib
LIBS        = -lglut -lGLU -lGL -lm
CFLAGS  = $(INCPATH) -g
LFLAGS  = $(LIBPATH) $(LIBS)

# Main targets
nome_do_programa: nome_do_programa.o
        gcc -o nome_do_programa nome_do_programa.o $(LFLAGS)

# Source targets
nome_do_programa.o: nome_do_programa.c
        gcc -c nome_do_programa.c $(CFLAGS)

</pre></td></tr></tbody></table></div>
<p>As regras contidas neste arquivo Makefile incluem opções de compilação tais 
como <b class="COMMAND">-lglut</b>, referente à biblioteca auxiliar GLUT, e <b class="COMMAND">-lMesaGLU -lMesaGL</b>, referentes às bibliotecas padrão do OpenGL 
para o Mesa3d, possibilitando que programas simples possam ser facilmente 
compilados.</p>
<p><b>Atenção:</b> Os espaços em branco antes das linhas 10, 14 e 18 no <b class="COMMAND">Makefile</b> 
são feitos com a tecla <b class="COMMAND">TAB</b> (somente uma marca de tabulação).  </p>
<p>Para testar se esse arquivo funciona no seu sistema, copie-o com o nome "<tt class="FILENAME">Makefile</tt>" (o arquivo Makefile não tem extensão) para um diretório qualquer, juntamente
 com o programa <a href="http://www.ceset.unicamp.br/%7Emagic/opengl/teste-make.c" target="_top"><tt class="FILENAME">teste-make.c</tt></a>, mostrado na <a href="http://www.ceset.unicamp.br/%7Emagic/opengl/compilando-programas.html#FIG-TESTE-MAKE">Figura 
1-3</a>. Altere o <i>Makefile</i> de forma que a palavra <i>nome_do_programa</i> seja substituída por
<i>teste-make</i>. Dentro deste diretório, execute a seguinte seqüência de comandos:</p>
<table width="100%" bgcolor="#e0e0e0" border="0">
  <tbody>
  <tr>
    <td><pre class="SCREEN"><tt class="PROMPT">$</tt> <b class="COMMAND">make</b> <span class="OPTION">teste-make</span>
<tt class="PROMPT">$</tt> <b class="COMMAND">./teste-make</b></pre></td></tr></tbody></table>
<p>Caso apareça um quadrado preto dentro de uma janela com fundo branco, é sinal 
de que ocorreu tudo bem.</p>
<div class="FIGURE">
<p><b><a name="FIG-TESTE-MAKE">Figura 1-3. programa <tt class="FILENAME">teste-make.c</tt></a></b></p>
<table width="100%" bgcolor="#e0e0e0" border="0">
  <tbody>
  <tr>
    <td><pre class="PROGRAMLISTING">/* programa teste-make.c */
/* Desenha um quadrado preto em uma janela com fundo branco */

#include &lt;GL/glut.h&gt;
#include &lt;stdlib.h&gt;

void display(void);

int main(int argc, char** argv){
  glutInit(&amp;argc, argv);
  glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
  glutInitWindowSize (256, 256); 
  glutInitWindowPosition (100, 100); 
  glutCreateWindow (argv[0]);
  glClearColor(1.0, 1.0, 1.0, 0.0);
  glShadeModel (GL_FLAT);
  glOrtho (0, 1, 0, 1, -1 ,1);
  glutDisplayFunc(display);
  glutMainLoop();
  return 0;
}


void display(void){
  int i;
  glClear(GL_COLOR_BUFFER_BIT);
  glColor3f (0.0, 0.0, 0.0);
  glBegin(GL_POLYGON);
  glVertex2f(0.25,0.25);
  glVertex2f(0.75,0.25);
  glVertex2f(0.75,0.75);
  glVertex2f(0.25,0.75);
  glEnd();
  glFlush();
}</pre></td></tr></tbody></table></div></div>
<div class="NAVFOOTER">
<hr width="100%" align="left">

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tbody>
  <tr>
    <td valign="top" width="33%" align="left"><a href="http://www.ceset.unicamp.br/%7Emagic/opengl/estrutura-programa.html">Prev</a></td>
    <td valign="top" width="34%" align="middle"><a href="http://www.ceset.unicamp.br/%7Emagic/opengl/index2006.html">Home</a></td>
    <td valign="top" width="33%" align="right"><a href="http://www.ceset.unicamp.br/%7Emagic/opengl/compilando-programas-dev.html">Next</a></td></tr>
  <tr>
    <td valign="top" width="33%" align="left">Estrutura de um programa</td>
    <td valign="top" width="34%" align="middle"><a href="http://www.ceset.unicamp.br/%7Emagic/opengl/conceitos-iniciais.html">Up</a></td>
    <td valign="top" width="33%" align="right">Compilando programas - usando o Dev</td></tr></tbody></table></div></body></html>